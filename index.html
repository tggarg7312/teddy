<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Sushii</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500&family=Playfair+Display:ital,wght@0,400;0,600;1,400&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg-deep: #000000;
            --text-gold: #E6D5B8;
            --text-gold-bright: #F4E4BC;
            --accent-warm: #C69C6D;
            --glass-border: rgba(255, 255, 255, 0.08);
            --ease-luxe: cubic-bezier(0.2, 1, 0.3, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            background-color: var(--bg-deep);
            color: var(--text-gold);
            font-family: 'Inter', sans-serif;
            height: 100vh;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        /* --- UTILITY CLASSES --- */
        .hidden {
            display: none !important;
        }

        .fade-out {
            animation: fadeOut 1s ease forwards;
        }

        .fade-in {
            animation: fadeIn 1.5s var(--ease-luxe) forwards;
        }

        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes fadeOut { from { opacity: 1; } to { opacity: 0; } }

        /* --- TYPOGRAPHY --- */
        .serif {
            font-family: 'Playfair Display', serif;
        }

        .cinematic-text {
            font-family: 'Playfair Display', serif;
            letter-spacing: 0.02em;
            text-align: center;
            line-height: 1.5;
        }

        /* --- SCENE: OPENING --- */
        #opening-layer {
            position: absolute;
            inset: 0;
            z-index: 100;
            background: black;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .bloom-text {
            color: white;
            font-size: 1.2rem;
            opacity: 0;
            text-shadow: 0 0 15px rgba(255,255,255,0.4);
            transition: opacity 2s ease;
        }

        /* --- SCENE: LOADER --- */
        #loader-layer {
            position: absolute;
            inset: 0;
            z-index: 90;
            background: black;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
        }

        .loader-track {
            width: 150px;
            height: 1px;
            background: rgba(255,255,255,0.1);
            position: relative;
            overflow: hidden;
        }

        .loader-fill {
            position: absolute;
            left: 0;
            top: 0;
            height: 100%;
            width: 0%;
            background: var(--text-gold);
            box-shadow: 0 0 10px var(--accent-warm);
            transition: width 3s linear;
        }

        /* --- SCENE: GATE (YES/NO) --- */
        #gate-layer {
            position: absolute;
            inset: 0;
            z-index: 80;
            background: black;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            gap: 3rem;
        }

        .btn-container {
            position: relative;
            width: 300px;
            height: 100px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 1.5rem;
        }

        .btn {
            background: rgba(255,255,255,0.05);
            border: 1px solid var(--glass-border);
            color: white;
            padding: 1rem 2.5rem;
            border-radius: 50px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.4s var(--ease-luxe);
            backdrop-filter: blur(10px);
        }

        .btn:hover {
            background: rgba(255,255,255,0.1);
            transform: scale(1.05);
            border-color: rgba(255,255,255,0.3);
        }

        #btn-no {
            position: absolute;
            transition: all 0.3s ease-out; /* Smooth physics */
        }

        /* --- SCENE: PASSWORD --- */
        #password-layer {
            position: absolute;
            inset: 0;
            z-index: 70;
            background: black;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .glass-card {
            background: rgba(20, 20, 20, 0.7);
            border: 1px solid var(--glass-border);
            padding: 3rem 2rem;
            border-radius: 24px;
            text-align: center;
            width: 90%;
            max-width: 380px;
            backdrop-filter: blur(20px);
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        input[type="number"] {
            background: transparent;
            border: none;
            border-bottom: 1px solid rgba(255,255,255,0.3);
            font-family: 'Playfair Display', serif;
            font-size: 2.5rem;
            color: var(--text-gold-bright);
            width: 80px;
            text-align: center;
            margin: 2rem 0;
            outline: none;
            transition: border-color 0.3s;
        }
        input[type="number"]:focus { border-bottom-color: var(--text-gold); }
        /* Remove spinners */
        input::-webkit-outer-spin-button, input::-webkit-inner-spin-button { -webkit-appearance: none; margin: 0; }

        .shake { animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both; }
        @keyframes shake { 10%, 90% { transform: translate3d(-1px, 0, 0); } 20%, 80% { transform: translate3d(2px, 0, 0); } 30%, 50%, 70% { transform: translate3d(-4px, 0, 0); } 40%, 60% { transform: translate3d(4px, 0, 0); } }

        /* --- SCENE: VIDEO --- */
        #video-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 60;
            background: black;
            opacity: 0;
            transition: opacity 1.5s ease;
        }

        video {
            width: 100%;
            height: 100%;
            object-fit: cover;
            /* CRITICAL FIX FOR BLUR */
            transform: translate3d(0,0,0); 
            will-change: transform; 
        }

        /* --- SCENE: REVEAL (TEXT & IMAGE) --- */
        #reveal-layer {
            position: absolute;
            inset: 0;
            z-index: 50;
            background: black; /* Solid background to hide video */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 2rem;
            opacity: 0; /* Starts hidden */
            transition: opacity 2s ease;
        }

        .teddy-frame {
            width: 220px;
            height: 220px;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 40px rgba(0,0,0,0.6);
            margin-bottom: 2.5rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1.5s var(--ease-luxe);
            border: 1px solid rgba(255,255,255,0.1);
        }

        .teddy-frame img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        /* FIXED NAME ANIMATION */
        .name-wrapper {
            display: flex;
            justify-content: center;
            align-items: baseline;
            gap: 2px; /* Tight spacing for elegance */
            margin-bottom: 2rem;
            height: 4rem; /* Fixed height to prevent layout jumps */
            overflow: hidden;
        }

        .name-char {
            display: inline-block;
            font-family: 'Playfair Display', serif;
            font-size: 3rem;
            font-weight: 500;
            
            /* Gold Gradient Text */
            background: linear-gradient(to bottom, #fff 10%, #E6D5B8 60%, #C69C6D 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            
            /* Initial State */
            opacity: 0;
            transform: translateY(100%);
        }

        .animate-name {
            animation: textRise 1.2s var(--ease-luxe) forwards;
        }

        @keyframes textRise {
            to { opacity: 1; transform: translateY(0); }
        }

        .message-box {
            text-align: center;
            opacity: 0;
            transform: translateY(20px);
            transition: all 1.5s ease 1s;
        }

        .message-box p {
            margin-bottom: 1.2rem;
            color: rgba(255,255,255,0.85);
            line-height: 1.6;
        }

        /* --- SCENE: EXIT (HUG & WHATSAPP) --- */
        #exit-layer {
            position: absolute;
            inset: 0;
            z-index: 110;
            background: radial-gradient(circle at center, #1a1105 0%, #000000 90%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 2s ease;
        }

        .hug-stage {
            position: relative;
            width: 150px;
            height: 150px;
            margin-bottom: 2rem;
        }

        .glow-orb {
            position: absolute;
            border-radius: 50%;
            filter: blur(25px);
            opacity: 0.7;
            mix-blend-mode: screen;
        }

        .orb-left { 
            width: 80px; height: 80px; background: #C69C6D; 
            top: 50%; left: 0; transform: translate(0, -50%);
            transition: all 3s var(--ease-luxe);
        }
        .orb-right { 
            width: 80px; height: 80px; background: #E6D5B8; 
            top: 50%; right: 0; transform: translate(0, -50%);
            transition: all 3s var(--ease-luxe);
        }

        .hugging .orb-left { left: 50%; transform: translate(-50%, -50%) scale(1.2); opacity: 0.9; }
        .hugging .orb-right { right: 50%; transform: translate(50%, -50%) scale(1.2); opacity: 0.9; }

        .whatsapp-btn {
            margin-top: 2rem;
            padding: 1rem 3rem;
            background: linear-gradient(135deg, rgba(255,255,255,0.1), rgba(255,255,255,0.02));
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 50px;
            color: var(--text-gold);
            font-size: 1.1rem;
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.5s ease;
            cursor: pointer;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            text-decoration: none;
            display: inline-block;
        }
        
        .whatsapp-btn:active { transform: scale(0.95); }

    </style>
</head>
<body>

    <div id="opening-layer">
        <div id="op-text-1" class="bloom-text serif">Close your eyes for a moment‚Ä¶</div>
        <div id="op-text-2" class="bloom-text serif" style="display:none">I have something gentle for you.</div>
    </div>

    <div id="loader-layer" class="hidden">
        <div class="loader-track">
            <div class="loader-fill" id="loader-bar"></div>
        </div>
        <p style="margin-top: 1rem; font-size: 0.8rem; letter-spacing: 0.2em; opacity: 0.6;">PREPARING</p>
    </div>

    <div id="gate-layer" class="hidden">
        <h1 class="cinematic-text" style="font-size: 1.5rem;">Ready for a soft surprise,<br>Sushii?</h1>
        <div class="btn-container">
            <button id="btn-yes" class="btn">YES üß∏</button>
            <button id="btn-no" class="btn">NO üôà</button>
        </div>
    </div>

    <div id="password-layer" class="hidden">
        <div class="glass-card">
            <h2 class="serif" style="font-size: 1.4rem;">Private Access</h2>
            <input type="number" id="pass-input" placeholder="00" autocomplete="off" inputmode="numeric">
            <p style="font-size: 0.8rem; letter-spacing: 0.1em; opacity: 0.5;">OUR SPECIAL MONTH</p>
            <p id="error-msg" style="margin-top:1rem; color:#C69C6D; font-size:0.9rem; opacity:0; transition:opacity 0.3s;">
                That doesn‚Äôt look like our month‚Ä¶ ‚ù§Ô∏è
            </p>
        </div>
    </div>

    <div id="video-layer" class="hidden">
        <video id="main-video" playsinline preload="auto">
            <source src="teddy-video.mp4" type="video/mp4">
        </video>
        <div id="video-tap-overlay" style="position:absolute; inset:0; background:rgba(0,0,0,0.4); display:none; justify-content:center; align-items:center; z-index:2;">
            <button class="btn">Tap to Watch ‚ù§Ô∏è</button>
        </div>
    </div>

    <div id="reveal-layer" class="hidden">
        <div class="teddy-frame" id="teddy-img">
            <img src="teddy.jpg" alt="Teddy" loading="lazy">
        </div>

        <div class="name-wrapper" id="name-container">
            </div>

        <div class="message-box cinematic-text" id="final-msg">
            <h2 style="font-size:1.8rem; color:var(--text-gold-bright); margin-bottom:1.5rem;">Happy Teddy Day üß∏</h2>
            <p>Like this teddy,<br>I wish I could always hold you close,<br>protect your smile.</p>
            <p>You are my warmth.<br>My calm.<br>My favorite feeling.</p>
        </div>
    </div>

    <div id="exit-layer" class="hidden">
        <div class="hug-stage" id="hug-anim">
            <div class="glow-orb orb-left"></div>
            <div class="glow-orb orb-right"></div>
        </div>
        
        <p class="cinematic-text" id="exit-txt-1" style="opacity:0; transition: opacity 1s;">I wish I could give you this hug in person.</p>
        <p class="cinematic-text" id="exit-txt-2" style="opacity:0; font-size: 0.9rem; color: #888; margin-top:0.5rem; transition: opacity 1s;">But for now‚Ä¶ this carries all my warmth.</p>
        
        <button id="whatsapp-btn" class="whatsapp-btn">Let‚Äôs go ‚ù§Ô∏è</button>
    </div>

    <script>
        // --- CONFIG ---
        const CONFIG = {
            password: "12",
            targetName: "Sushii", // The name to animate
            whatsappPhone: "917015897312", // Country code + number
            whatsappMsg: "I just experienced something beautiful..."
        };

        // --- ELEMENTS ---
        const layers = {
            opening: document.getElementById('opening-layer'),
            loader: document.getElementById('loader-layer'),
            gate: document.getElementById('gate-layer'),
            password: document.getElementById('password-layer'),
            video: document.getElementById('video-layer'),
            reveal: document.getElementById('reveal-layer'),
            exit: document.getElementById('exit-layer')
        };

        // --- UTILS ---
        const wait = (ms) => new Promise(resolve => setTimeout(resolve, ms));

        // --- SEQUENCE 1: OPENING ---
        window.onload = async () => {
            const t1 = document.getElementById('op-text-1');
            const t2 = document.getElementById('op-text-2');

            await wait(500);
            t1.style.opacity = 1;
            await wait(2500);
            t1.style.opacity = 0;
            
            await wait(1000);
            t1.style.display = 'none';
            t2.style.display = 'block';
            await wait(100); // render tick
            t2.style.opacity = 1;
            
            await wait(2500);
            t2.style.opacity = 0;
            await wait(1000);
            
            layers.opening.classList.add('hidden');
            layers.loader.classList.remove('hidden');
            runLoader();
        };

        // --- SEQUENCE 2: LOADER ---
        async function runLoader() {
            const bar = document.getElementById('loader-bar');
            // Force reflow
            void bar.offsetWidth;
            bar.style.width = '100%';
            
            await wait(3200);
            layers.loader.classList.add('fade-out');
            setTimeout(() => {
                layers.loader.classList.add('hidden');
                layers.gate.classList.remove('hidden');
                layers.gate.classList.add('fade-in');
                initGate();
            }, 1000);
        }

        // --- SEQUENCE 3: GATE ---
        function initGate() {
            const noBtn = document.getElementById('btn-no');
            const yesBtn = document.getElementById('btn-yes');
            let attempts = 0;

            const moveNo = () => {
                attempts++;
                const x = (Math.random() - 0.5) * 200;
                const y = (Math.random() - 0.5) * 200;
                noBtn.style.transform = `translate(${x}px, ${y}px)`;
                
                // Yes button grows slightly
                yesBtn.style.transform = `scale(${1 + attempts * 0.1})`;
            };

            noBtn.addEventListener('mouseover', moveNo);
            noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveNo(); });
            
            yesBtn.addEventListener('click', () => {
                layers.gate.classList.add('hidden');
                layers.password.classList.remove('hidden');
                layers.password.classList.add('fade-in');
            });
        }

        // --- SEQUENCE 4: PASSWORD ---
        const passInput = document.getElementById('pass-input');
        const glassCard = document.querySelector('.glass-card');
        const errorMsg = document.getElementById('error-msg');

        passInput.addEventListener('input', (e) => {
            if (e.target.value.length === 2) {
                if (e.target.value === CONFIG.password) {
                    passInput.blur();
                    glassCard.style.transform = "scale(1.1)";
                    glassCard.style.opacity = "0";
                    setTimeout(startVideo, 500);
                } else {
                    glassCard.classList.add('shake');
                    errorMsg.style.opacity = 1;
                    passInput.value = "";
                    setTimeout(() => glassCard.classList.remove('shake'), 500);
                }
            }
        });

        // --- SEQUENCE 5: VIDEO ---
        async function startVideo() {
            layers.password.classList.add('hidden');
            layers.video.classList.remove('hidden');
            
            const vid = document.getElementById('main-video');
            // Force rendering refresh for clarity
            vid.style.opacity = 1;
            
            try {
                await vid.play();
            } catch (e) {
                const overlay = document.getElementById('video-tap-overlay');
                overlay.style.display = 'flex';
                overlay.onclick = () => {
                    vid.play();
                    overlay.style.display = 'none';
                };
            }

            vid.onended = () => {
                vid.style.opacity = 0;
                setTimeout(() => {
                    layers.video.classList.add('hidden');
                    startReveal();
                }, 1500);
            };
        }

        // --- SEQUENCE 6: REVEAL ---
        async function startReveal() {
            layers.reveal.classList.remove('hidden');
            layers.reveal.style.opacity = 1;
            
            // 1. Image
            const img = document.getElementById('teddy-img');
            img.style.opacity = 1;
            img.style.transform = 'translateY(0)';
            
            await wait(1200);

            // 2. Name Animation (FIXED)
            const container = document.getElementById('name-container');
            const nameStr = CONFIG.targetName;
            
            // Clear just in case
            container.innerHTML = '';
            
            // Create spans
            [...nameStr].forEach((char, i) => {
                const span = document.createElement('span');
                span.textContent = char;
                span.className = 'name-char';
                // Stagger delay
                span.style.animationDelay = `${i * 0.15}s`;
                container.appendChild(span);
            });

            // Trigger animation class
            // Small timeout to ensure DOM is ready
            setTimeout(() => {
                const chars = document.querySelectorAll('.name-char');
                chars.forEach(c => c.classList.add('animate-name'));
            }, 50);

            await wait(2000);

            // 3. Message
            const msg = document.getElementById('final-msg');
            msg.style.opacity = 1;
            msg.style.transform = 'translateY(0)';

            // 4. Move to Exit
            setTimeout(startExit, 7000);
        }

        // --- SEQUENCE 7: EXIT & WHATSAPP ---
        async function startExit() {
            layers.reveal.style.opacity = 0;
            await wait(1500);
            layers.reveal.classList.add('hidden');
            
            layers.exit.classList.remove('hidden');
            layers.exit.style.pointerEvents = 'auto';
            // Need a slight delay for transition to work on display block
            await wait(50);
            layers.exit.style.opacity = 1;

            // Hug
            setTimeout(() => {
                document.getElementById('hug-anim').classList.add('hugging');
            }, 500);

            await wait(3000);
            document.getElementById('exit-txt-1').style.opacity = 1;
            await wait(2000);
            document.getElementById('exit-txt-2').style.opacity = 1;
            
            await wait(1000);
            const btn = document.getElementById('whatsapp-btn');
            btn.style.opacity = 1;
            btn.style.transform = 'translateY(0)';

            btn.onclick = () => {
                const encoded = encodeURIComponent(CONFIG.whatsappMsg);
                window.location.href = `https://wa.me/${CONFIG.whatsappPhone}?text=${encoded}`;
            };
        }

    </script>
</body>
</html>
